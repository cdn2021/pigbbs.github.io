<meta charset="utf-8">
<title>猪猪留言板 - 登录</title>
<script src=https://pig-cmd.github.io/bmobSDK.js></script>
<script src=/js/head.js></script>
<center><pre>
<span style='font-size:3em'>登录</span>
用户名<input type=text maxlength=24 id=username placeholder=Username>
密码<input type=password maxlength=16 id=password placeholder=Password>
<input type=button value='没有账号？点我注册' onclick=javascript:goreg();>
<input type=button value=提交 onclick=javascript:login();>
<input type=checkbox onclick=javascript:sessionStorage.setItem('p',1); id=s-p>记住密码
<script>
var boo = false;
setInterval(function(){
  if (sessionStorage.getItem('p') != null)
  {
    boo = !boo;
    sessionStorage.removeItem("p");
    //判断记住密码是否被点击
  }
},200);
  
var p_username = localStorage.getItem("pre-username");
var p_password = localStorage.getItem("pre-password");
if (p_username != null && p_password != null)
{
  //是否要记住密码，如果要，填写用户名和密码
  document.getElementById("s-p").checked = true;
  document.getElementById("username").value = p_username;
  document.getElementById("password").value = p_password;
}
function login()
{
  sessionStorage.removeItem("captcha");
  sessionStorage.setItem("pre-username",document.getElementById("username").value);
  sessionStorage.setItem("pre-password",document.getElementById("password").value);
  //保存用户名和密码
  if (boo)
  {
    localStorage.setItem("pre-username",document.getElementById("username").value);
    localStorage.setItem("pre-password",document.getElementById("password").value);
  } else {
    localStorage.removeItem("pre-username");
    localStorage.removeItem("pre-password");
  }
  var hash = location.hash;
  location.href="save-login.html" + hash;
  //跳转到提交登录的页面
}
function goreg()
{
  var hash = location.hash;
  location.href = "register.html" + hash;
  //跳转到注册页面
}
</script>
